// ========================================
// MULTI-LANGUAGE TRANSLATION SYSTEM
// Miss South Africa Disability
// ========================================

const translations = {
  en: {
    // Navigation
    'nav-home': 'Home',
    'nav-about': 'About Us',
    'nav-gallery': 'Gallery',
    'nav-events': 'Events',
    'nav-registration': 'Registration',
    'nav-contact': 'Contact',
    'nav-blog': 'Blog',
    'language-current': 'English',
    
    // Language options
    'lang-english': 'English',
    'lang-zulu': 'isiZulu',
    'lang-xhosa': 'isiXhosa',
    'lang-afrikaans': 'Afrikaans',
    
    // Hero section
    'hero-title': 'Beauty, Reimagined.',
    'hero-subtitle': 'Celebrating the strength, talent, and leadership of women with disabilities in South Africa.',
    'hero-apply': 'Apply for 2026',
    'hero-learn': 'Learn More',
    'hero-deadline': 'Applications for the 2026 pageant close October 31, 2025',
    
    // Gallery
    'gallery-title': 'Photo Gallery',
    'gallery-intro': 'Explore moments from our events, celebrations, and community outreach programs',
    'filter-all': 'All',
    'filter-events': 'Events',
    'filter-winners': 'Winners',
    'filter-community': 'Community',
    
    // Progress tracker
    'progress-title': 'Application Process',
    'progress-intro': 'Follow these simple steps to join our empowering community',
    'step1-title': 'Register',
    'step1-desc': 'Complete your initial registration with basic information',
    'step2-title': 'Documents',
    'step2-desc': 'Upload required documents and verification materials',
    'step3-title': 'Interview',
    'step3-desc': 'Participate in our virtual or in-person interview process',
    'step4-title': 'Selection',
    'step4-desc': 'Final selection and welcome to our community',
    'step-pending': 'Pending',
    'step-completed': 'Completed',
    'step-current': 'In Progress',
    'start-application': 'Start Your Application',
    'check-progress': 'Check Progress',
    
    // Common
    'read-more': 'Read More',
    'learn-more': 'Learn More',
    'view-all': 'View All',
    'contact-us': 'Contact Us',
    'subscribe': 'Subscribe',
    'loading': 'Loading...'
  },
  
  zu: {
    // Navigation
    'nav-home': 'Ikhaya',
    'nav-about': 'Mayelana Nathi',
    'nav-gallery': 'Igalari',
    'nav-events': 'Imicimbi',
    'nav-registration': 'Ukubhalisa',
    'nav-contact': 'Xhumana Nathi',
    'nav-blog': 'Ibhulogi',
    'language-current': 'isiZulu',
    
    // Language options
    'lang-english': 'IsiNgisi',
    'lang-zulu': 'isiZulu',
    'lang-xhosa': 'isiXhosa',
    'lang-afrikaans': 'Afrikaans',
    
    // Hero section
    'hero-title': 'Ubuhle, Buphinde Bakhiwe.',
    'hero-subtitle': 'Sigubha amandla, italente, nobuholi babesifazane abakhubazekile eNingizimu Afrika.',
    'hero-apply': 'Faka Isicelo ku-2026',
    'hero-learn': 'Funda Kabanzi',
    'hero-deadline': 'Izicelo ze-pageant ka-2026 zivalwa ngo-October 31, 2025',
    
    // Gallery
    'gallery-title': 'Igalari Yezithombe',
    'gallery-intro': 'Hlola izikhathi zemicimbi yethu, imigubho, nezinhlelo zokusiza umphakathi',
    'filter-all': 'Konke',
    'filter-events': 'Imicimbi',
    'filter-winners': 'Abaphumeleli',
    'filter-community': 'Umphakathi',
    
    // Progress tracker
    'progress-title': 'Inqubo Yesicelo',
    'progress-intro': 'Landela lezi zinyathelo ezilula ukuze ujoyine umphakathi wethu onikeza amandla',
    'step1-title': 'Bhalisa',
    'step1-desc': 'Qedela ukubhalisa kwakho kokuqala ngolwazi oluyisisekelo',
    'step2-title': 'Amadokhumenti',
    'step2-desc': 'Layisha amadokhumenti adingekayo nezinto zokuqinisekisa',
    'step3-title': 'Inhlolokhono',
    'step3-desc': 'Bamba iqhaza enqubeni yethu yenhlolokhono ye-virtual noma ngqo',
    'step4-title': 'Ukukhethwa',
    'step4-desc': 'Ukukhethwa kokugcina nokwamukelwa emphakathini wethu',
    'step-pending': 'Kulindile',
    'step-completed': 'Kuqediwe',
    'step-current': 'Kuyaqhubeka',
    'start-application': 'Qala Isicelo Sakho',
    'check-progress': 'Hlola Inqubekelaphambili',
    
    // Common
    'read-more': 'Funda Kabanzi',
    'learn-more': 'Funda Kabanzi',
    'view-all': 'Bona Konke',
    'contact-us': 'Xhumana Nathi',
    'subscribe': 'Bhalisa',
    'loading': 'Iyalayisha...'
  },
  
  xh: {
    // Navigation
    'nav-home': 'Ikhaya',
    'nav-about': 'Malunga Nathi',
    'nav-gallery': 'Igalari',
    'nav-events': 'Imisitho',
    'nav-registration': 'Ukubhalisa',
    'nav-contact': 'Qhagamshelana Nathi',
    'nav-blog': 'Iblog',
    'language-current': 'isiXhosa',
    
    // Language options
    'lang-english': 'IsiNgesi',
    'lang-zulu': 'isiZulu',
    'lang-xhosa': 'isiXhosa',
    'lang-afrikaans': 'Afrikaans',
    
    // Hero section
    'hero-title': 'Ubuhle, Buphinde Bakhiwe.',
    'hero-subtitle': 'Sibulela amandla, italente, nobunkokeli babasetyhini abakhubazekileyo eMzantsi Afrika.',
    'hero-apply': 'Faka Isicelo ku-2026',
    'hero-learn': 'Funda Ngakumbi',
    'hero-deadline': 'Izicelo ze-pageant ka-2026 ziyavalwa ngo-October 31, 2025',
    
    // Gallery
    'gallery-title': 'Igalari Yemifanekiso',
    'gallery-intro': 'Jonga amaxesha emisitho yethu, imibhiyozo, neenkqubo zoncedo loluntu',
    'filter-all': 'Konke',
    'filter-events': 'Imisitho',
    'filter-winners': 'Abaphumeleleyo',
    'filter-community': 'Uluntu',
    
    // Progress tracker
    'progress-title': 'Inkqubo Yesicelo',
    'progress-intro': 'Landela la manyathelo alula ukuze ujoyine uluntu lwethu olunika amandla',
    'step1-title': 'Bhalisa',
    'step1-desc': 'Gqiba ukubhalisa kwakho kokuqala ngolwazi olusisiseko',
    'step2-title': 'Amaxwebhu',
    'step2-desc': 'Layisha amaxwebhu afunekayo nezinto zokuqinisekisa',
    'step3-title': 'Udliwanondlebe',
    'step3-desc': 'Thabatha inxaxheba kwinkqubo yethu yodliwanondlebe ye-virtual okanye ngqo',
    'step4-title': 'Ukhetho',
    'step4-desc': 'Ukhetho lokugqibela nokwamkelwa kuluntu lwethu',
    'step-pending': 'Kuyalindwa',
    'step-completed': 'Kugqityiwe',
    'step-current': 'Kuyaqhubeka',
    'start-application': 'Qala Isicelo Sakho',
    'check-progress': 'Jonga Inkqubela',
    
    // Common
    'read-more': 'Funda Ngakumbi',
    'learn-more': 'Funda Ngakumbi',
    'view-all': 'Jonga Konke',
    'contact-us': 'Qhagamshelana Nathi',
    'subscribe': 'Bhalisa',
    'loading': 'Kuyalayisha...'
  },
  
  af: {
    // Navigation
    'nav-home': 'Tuis',
    'nav-about': 'Oor Ons',
    'nav-gallery': 'Galery',
    'nav-events': 'Geleenthede',
    'nav-registration': 'Registrasie',
    'nav-contact': 'Kontak',
    'nav-blog': 'Blog',
    'language-current': 'Afrikaans',
    
    // Language options
    'lang-english': 'Engels',
    'lang-zulu': 'isiZulu',
    'lang-xhosa': 'isiXhosa',
    'lang-afrikaans': 'Afrikaans',
    
    // Hero section
    'hero-title': 'Skoonheid, Herontwerp.',
    'hero-subtitle': 'Vier die krag, talent en leierskap van vroue met gestremdhede in Suid-Afrika.',
    'hero-apply': 'Doen Aansoek vir 2026',
    'hero-learn': 'Leer Meer',
    'hero-deadline': 'Aansoeke vir die 2026 skoonheidskompetisie sluit op 31 Oktober 2025',
    
    // Gallery
    'gallery-title': 'Foto Galery',
    'gallery-intro': 'Verken oomblikke van ons geleenthede, vieringe en gemeenskapsuitreikprogramme',
    'filter-all': 'Alles',
    'filter-events': 'Geleenthede',
    'filter-winners': 'Wenners',
    'filter-community': 'Gemeenskap',
    
    // Progress tracker
    'progress-title': 'Aansoeking Proses',
    'progress-intro': 'Volg hierdie eenvoudige stappe om by ons bemagtigende gemeenskap aan te sluit',
    'step1-title': 'Registreer',
    'step1-desc': 'Voltooi jou aanvanklike registrasie met basiese inligting',
    'step2-title': 'Dokumente',
    'step2-desc': 'Laai vereiste dokumente en verifikasie materiale op',
    'step3-title': 'Onderhoud',
    'step3-desc': 'Neem deel aan ons virtuele of persoonlike onderhoudsroses',
    'step4-title': 'Keuring',
    'step4-desc': 'Finale keuring en verwelkoming in ons gemeenskap',
    'step-pending': 'Hangend',
    'step-completed': 'Voltooi',
    'step-current': 'In Proses',
    'start-application': 'Begin Jou Aansoek',
    'check-progress': 'Kyk Vordering',
    
    // Common
    'read-more': 'Lees Meer',
    'learn-more': 'Leer Meer',
    'view-all': 'Sien Alles',
    'contact-us': 'Kontak Ons',
    'subscribe': 'Teken In',
    'loading': 'Laai...'
  }
};

// Language Management Class
class LanguageManager {
  constructor() {
    this.currentLanguage = localStorage.getItem('preferred-language') || 'en';
    this.init();
  }
  
  init() {
    this.updateLanguageDisplay();
    this.bindEvents();
    this.translatePage();
  }
  
  bindEvents() {
    const languageToggle = document.getElementById('language-toggle');
    const languageOptions = document.querySelectorAll('.language-option');
    
    if (languageToggle) {
      languageToggle.addEventListener('click', this.toggleLanguageDropdown.bind(this));
      languageToggle.addEventListener('keydown', this.handleKeyboardNavigation.bind(this));
    }
    
    languageOptions.forEach(option => {
      option.addEventListener('click', (e) => {
        e.preventDefault();
        this.changeLanguage(option.dataset.lang);
      });
      option.addEventListener('keydown', this.handleOptionKeydown.bind(this));
    });
    
    // Close dropdown when clicking outside
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.language-toggle')) {
        this.closeLanguageDropdown();
      }
    });
  }
  
  toggleLanguageDropdown() {
    const toggle = document.getElementById('language-toggle');
    const dropdown = document.getElementById('language-dropdown');
    const isExpanded = toggle.getAttribute('aria-expanded') === 'true';
    
    toggle.setAttribute('aria-expanded', !isExpanded);
    dropdown.style.display = isExpanded ? 'none' : 'block';
    
    if (!isExpanded) {
      // Focus first option when opening
      const firstOption = dropdown.querySelector('.language-option');
      if (firstOption) firstOption.focus();
    }
  }
  
  closeLanguageDropdown() {
    const toggle = document.getElementById('language-toggle');
    const dropdown = document.getElementById('language-dropdown');
    
    toggle.setAttribute('aria-expanded', 'false');
    dropdown.style.display = 'none';
  }
  
  handleKeyboardNavigation(e) {
    const dropdown = document.getElementById('language-dropdown');
    const options = dropdown.querySelectorAll('.language-option');
    
    switch(e.key) {
      case 'Enter':
      case ' ':
        e.preventDefault();
        this.toggleLanguageDropdown();
        break;
      case 'ArrowDown':
        e.preventDefault();
        this.toggleLanguageDropdown();
        options[0]?.focus();
        break;
      case 'Escape':
        this.closeLanguageDropdown();
        break;
    }
  }
  
  handleOptionKeydown(e) {
    const options = Array.from(document.querySelectorAll('.language-option'));
    const currentIndex = options.indexOf(e.target);
    
    switch(e.key) {
      case 'ArrowDown':
        e.preventDefault();
        const nextIndex = (currentIndex + 1) % options.length;
        options[nextIndex].focus();
        break;
      case 'ArrowUp':
        e.preventDefault();
        const prevIndex = currentIndex === 0 ? options.length - 1 : currentIndex - 1;
        options[prevIndex].focus();
        break;
      case 'Enter':
      case ' ':
        e.preventDefault();
        this.changeLanguage(e.target.dataset.lang);
        break;
      case 'Escape':
        this.closeLanguageDropdown();
        document.getElementById('language-toggle').focus();
        break;
    }
  }
  
  changeLanguage(langCode) {
    if (translations[langCode]) {
      this.currentLanguage = langCode;
      localStorage.setItem('preferred-language', langCode);
      this.translatePage();
      this.updateLanguageDisplay();
      this.closeLanguageDropdown();
      this.announceLanguageChange(langCode);
    }
  }
  
  translatePage() {
    const elements = document.querySelectorAll('[data-translate]');
    const langData = translations[this.currentLanguage];
    
    elements.forEach(element => {
      const key = element.getAttribute('data-translate');
      if (langData[key]) {
        if (element.tagName === 'INPUT' && element.type === 'submit') {
          element.value = langData[key];
        } else {
          element.textContent = langData[key];
        }
      }
    });
    
    // Update document language attribute
    document.documentElement.setAttribute('lang', this.currentLanguage);
  }
  
  updateLanguageDisplay() {
    const currentSpan = document.querySelector('[data-translate="language-current"]');
    const langData = translations[this.currentLanguage];
    
    if (currentSpan && langData) {
      currentSpan.textContent = langData['language-current'];
    }
    
    // Update selected state in dropdown
    const options = document.querySelectorAll('.language-option');
    options.forEach(option => {
      const isSelected = option.dataset.lang === this.currentLanguage;
      option.setAttribute('aria-selected', isSelected);
      option.classList.toggle('selected', isSelected);
    });
  }
  
  announceLanguageChange(langCode) {
    const announcer = document.getElementById('live-announcer');
    const langName = translations[langCode]['language-current'];
    
    if (announcer) {
      announcer.textContent = `Language changed to ${langName}`;
      setTimeout(() => {
        announcer.textContent = '';
      }, 1000);
    }
  }
}

// Initialize language manager when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => {
    window.languageManager = new LanguageManager();
  });
} else {
  window.languageManager = new LanguageManager();
}